---
import DefaultLayout from "../layouts/Default.astro";
import Header from '../sections/Header.tsx'
import Hero from "../sections/Hero";
import FeaturesCard from "../sections/FeaturesCard";
import FeaturesGrid from "../sections/FeaturesGrid";
import LatestPost from "../sections/LatestPost";
import Testimonials from "../sections/Testimonials"

import { getCollection } from "astro:content";
const posts = await getCollection('blog');
const latestPosts = posts.sort((a,b)=>{
  if(a.data.pubDate.valueOf()=== b.data.pubDate.valueOf()) return 0;
  return a.data.pubDate.valueOf()>b.data.pubDate.valueOf() ? -1:1;
}).slice(0,4)

---

<DefaultLayout>
  <Header />
  <Hero />
  <FeaturesCard />
  <FeaturesGrid />
  <LatestPost latestPosts={latestPosts}/>
  <Testimonials />
</DefaultLayout>